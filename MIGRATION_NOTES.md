# Migration from Foundry to Hardhat

This project has been migrated from Foundry to Hardhat for testing and deployment.

## What Changed

### Removed Files
- `contracts/foundry.toml` - Foundry configuration
- `contracts/remappings.txt` - Foundry remappings
- `contracts/script/Deploy.s.sol` - Foundry deployment script
- `contracts/test/KarmaVault.t.sol` - Foundry test file

### New Files
- `contracts/hardhat.config.ts` - Hardhat configuration
- `contracts/package.json` - Hardhat dependencies
- `contracts/tsconfig.json` - TypeScript configuration
- `contracts/scripts/deploy.ts` - Hardhat deployment script
- `contracts/test/KarmaVault.test.ts` - Hardhat test file
- `contracts/src/mocks/ERC20Mock.sol` - Mock ERC20 token for testing
- `contracts/scripts/verify.ts` - Contract verification helper

### Updated Files
- All documentation files updated to reference Hardhat instead of Foundry
- `README.md` - Updated setup instructions
- `SETUP_CHECKLIST.md` - Updated deployment instructions
- `docs/DEPLOYMENT.md` - Updated deployment guide
- `docs/CONTRACTS.md` - Updated testing instructions
- `PROJECT_SUMMARY.md` - Updated project summary
- `package.json` - Updated root scripts

## Key Differences

### Testing
- **Foundry**: Used Solidity test files (`.t.sol`)
- **Hardhat**: Uses TypeScript test files (`.test.ts`) with Mocha and Chai

### Deployment
- **Foundry**: `forge script script/Deploy.s.sol --rpc-url ... --broadcast`
- **Hardhat**: `npm run deploy:sepolia` or `npx hardhat run scripts/deploy.ts --network sepolia`

### Compilation
- **Foundry**: `forge build`
- **Hardhat**: `npm run compile` or `npx hardhat compile`

### Installation
- **Foundry**: Required separate installation via `foundryup`
- **Hardhat**: Installed via npm, no separate installation needed

## Benefits of Hardhat

1. **TypeScript Support**: Better type safety and IDE support
2. **Easier Setup**: No separate installation required, just npm install
3. **Better Integration**: Works seamlessly with frontend JavaScript/TypeScript code
4. **Rich Plugin Ecosystem**: Many plugins available for testing, deployment, etc.
5. **Debugging**: Better debugging tools and stack traces

## Migration Checklist

- [x] Remove Foundry configuration files
- [x] Set up Hardhat configuration
- [x] Convert tests to Hardhat/Mocha format
- [x] Convert deployment script to Hardhat
- [x] Create ERC20Mock contract
- [x] Update all documentation
- [x] Update package.json scripts
- [x] Test compilation
- [x] Test deployment script
- [x] Test test suite

## Next Steps

1. Install dependencies: `cd contracts && npm install`
2. Compile contracts: `npm run compile`
3. Run tests: `npm test`
4. Deploy: `npm run deploy:sepolia`

## Notes

- All contract source code remains the same
- Only testing and deployment infrastructure changed
- OpenZeppelin contracts are installed via npm instead of git submodules
- TypeScript type definitions are auto-generated by Hardhat

